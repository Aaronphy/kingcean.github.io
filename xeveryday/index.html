<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="user-scalable=yes, width=400" />
    <title>X Everyday</title>
    <link href="css/common.css" media="all" rel="stylesheet" />
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.1.0.min.js" ></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-3.4.0.js" ></script>
</head>
<body>
    <header>
        <div>
            <h1>
                <a href="http://xeveryday.com">
                    <img alt="X Everyday" src="images/logo0_white.png" />
                </a>
            </h1>
            <ul>
                <li>
                    <a href="http://weibo.com/liuhuidaisy">Weibo</a>
                </li>
                <li>
                    <a href="#">Facebook</a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
            </ul>
        </div>
    </header>
    <menu id="xe_menu" style="display: none; ">
        <ul data-bind="foreach: years">
            <li data-bind="css: { 'selected': $root.selectedY === $data }">
                <a data-bind="text: $data, attr: { href: '?year=' + $data + '&month=' + ($root.selectedM + 1), title: $data }"></a>
            </li>
        </ul>
        <ul data-bind="foreach: months">
            <li data-bind="css: { 'selected': $root.selectedM === 11 - $index() }">
                <a data-bind="text: $data, attr: { href: '?year=' + $root.selectedY + '&month=' + (12 - $index()), title: $data }"></a>
            </li>
        </ul>
    </menu>
    <section id="xe_slide" class="slide">
        <div style="background-image: url(images/x_e_sample.jpg);">

        </div>
    </section>
    <section id="xe_list" class="list" style="display: none; ">
        <ul id="xe_list_all">
            <li class="big">
                <span data-bind="text: monthText"></span>
            </li><!-- ko foreach: list --><li class="tile">
                <img data-bind="attr: { alt: name, src: url }" /><strong data-bind="text: '#' + index"></strong>
            </li><!-- /ko -->
        </ul>
    </section>
    <section id="xe_page" class="page" style="display: none; ">
        <ul>
            <li>
                <a data-bind="text: '&lt; &nbsp;' + prevText, attr: { href: '?year=' + prevY + '&month=' + (prevM + 1) }">&lt; Previous</a>
            </li>
            <li class="selected">
                <a data-bind="text: curText, attr: { href: '?year=' + curY + '&month=' + (curM + 1) }">Current</a>
            </li>
            <li>
                <a data-bind="text: nextText + '&nbsp; &gt;', attr: { href: '?year=' + nextY + '&month=' + (nextM + 1) }">Next &gt;</a>
            </li>
        </ul>
    </section>
    <footer>
        <div>
            <div>
                <strong>A Daisy's website.</strong>
            </div>
            <ul>
                <li>
                    <a href="http://design.microsoft.com/">Microsoft Design</a>
                </li>
                <li>
                    <a href="http://www.kingcean.com/">Kingcean.com</a>
                </li>
            </ul>
        </div>
    </footer>
    <script type="text/javascript">
    <!--
        var list = [];
        for (var i = 0; i < 12; i++) {
            list.push({
                name: null,
                index: 10900 + i,
                url: "images/x_e_sample.jpg"
            });
        }

        var now = new Date();
        var selectedYear = now.getFullYear();
        var selectedMonth = now.getMonth();
        var firstYear = 2011;
        var months = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
        menuModel = {
            years: [],
            months: [],
            selectedY: selectedYear,
            selectedM: selectedMonth
        };
        menuModel.months = ([].concat(months)).reverse();
        for (var i = now.getFullYear(); i >= firstYear; i--) {
            menuModel.years.push(i);
        }

        var menuEle = document.getElementById("xe_menu");
        menuEle.style.display = "";
        ko.applyBindings(menuModel, menuEle);

        var listModel = {
            monthText: months[selectedMonth],
            list: list
        };

        var listEle = document.getElementById("xe_list");
        listEle.style.display = "";
        ko.applyBindings(listModel, listEle);

        var pageModel = {
            curText: months[selectedMonth],
            curY: selectedYear,
            curM: selectedMonth,
            prevText: selectedMonth > 0 ? months[selectedMonth - 1] : months[11],
            prevY: selectedMonth > 0 ? selectedYear : selectedYear - 1,
            prevM: selectedMonth > 0 ? selectedMonth - 1 : 11,
            nextText: selectedMonth < 11 ? months[selectedMonth + 1] : months[0],
            nextY: selectedMonth < 11 ? selectedYear : selectedYear + 1,
            nextM: selectedMonth < 11 ? selectedMonth + 1 : 0
        };

        var pageEle = document.getElementById("xe_page");
        pageEle.style.display = "";
        ko.applyBindings(pageModel, pageEle);
    //-->
    </script>
</body>
</html>
